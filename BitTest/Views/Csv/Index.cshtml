@model IEnumerable<BitTest.Models.CsvRecord>

@{
    ViewData["Title"] = "CSV Records";
}

<link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js" defer></script>

<h2>CSV Records</h2>

@if (!Model.Any())
{
    <p>No records found.</p>
}
else
{
    <table id="csvTable" class="display" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Date of Birth</th>
                <th>Married</th>
                <th>Phone</th>
                <th>Salary</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var record in Model)
            {
                <tr>
                    <td>@record.Name</td>
                    @{
                        // Convert the Date of Birth to "dd-mm-yyyy" format
                        var dateOfBirth = record.DateOfBirth.ToString("dd-MM-yyyy");
                        var timestamp = ((DateTimeOffset)record.DateOfBirth).ToUnixTimeSeconds(); 
                    }
                    <td data-sort="@timestamp">@dateOfBirth</td>
                    <td>@(record.Married ? "Yes" : "No")</td>
                    <td>@record.Phone</td>
                    <td>@record.Salary.ToString("C")</td>
                </tr>
            }
        </tbody>
    </table>

    <script>
        $(document).ready(function () {
            $('#csvTable').DataTable({
                "paging": true, 
                "searching": true, 
                "ordering": true, 
                "info": true, 
                "lengthMenu": [10, 25, 50, 100], 
                "order": [[1, 'asc']] 
            });
        });
    </script>
}
